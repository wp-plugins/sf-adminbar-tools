if(!(window.console&&console.log)){(function(){var d=function(){};var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","markTimeline","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=window.console={};while(c--){a[b[c]]=d}}())}(function(a){a.fn.hoverIntentOn=function(k,j){var l={sensitivity:7,interval:100,timeout:0,delegate:null};l=a.extend(l,j?{over:k,out:j}:k);var n,m,h,d;var e=function(f){n=f.pageX;m=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-n)+Math.abs(d-m))<l.sensitivity){a(f).off("mousemove",l.delegate,e);f.hoverIntent_s=1;return l.over.apply(f,[g])}else{h=n;d=m;f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}};var i=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return l.out.apply(f,[g])};var b=function(o){var g=jQuery.extend({},o);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(o.type=="mouseenter"){h=g.pageX;d=g.pageY;a(f).on("mousemove",e);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}}else{a(f).off("mousemove",e);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){i(g,f)},l.timeout)}}};return this.on("mouseenter",l.delegate,b).on("mouseleave",l.delegate,b)}})(jQuery);(function(a){a.fn.abtLoader=function(){return this.after('<span class="loader">&#160;</span>')}})(jQuery);(function(a){a.fn.fadeInRemove=function(){return this.fadeIn(function(){a(this).remove()})}})(jQuery);(function(a){a.fn.slideUpRemove=function(){return this.animate({height:0},300,function(){a(this).remove()})}})(jQuery);(function(a){a.fn.abtRemoveLoader=function(){return this.blur().next(".loader").fadeInRemove()}})(jQuery);(function(a){a.fn.abtAddClone=function(b,c){var d=this.addClass("used-by-me").clone(true).height(0).attr("id",function(e,f){return f+"-own"});d.children(".loader").remove();d.insertBefore(b).animate({height:"26px"},300);if(typeof c!="undefined"&&c!==""){d.children(".ab-item").prepend(c)}return this}})(jQuery);jQuery(document).ready(function(a){var b={$body:a("body"),$bar:a(document.getElementById("wpadminbar")),$tools:a(document.getElementById("wp-admin-bar-sf-abt-tools")),$files_dd:a(document.getElementById("wp-admin-bar-sf-abt-files")),$clr_btn:a(document.getElementById("wp-admin-bar-sf-abt-close-files")),open_files:"",refc:"",forceload:"&force=1",events:0,log:function(c){var d={noConnexion:"Error: can't establish a connexion :/",unkownError:"The server told me there's an error somewhere :s",badResponse:"Error: bad response from the server",noLocalStorage:"Your browser does not support localStorage. The small adminbar and the floated admin menu will not be saved between pages."};if(typeof d.code=="string"){console.log(d[c])}else{console.log(c)}},hoverIntent:function(){if(typeof(jQuery.fn.hoverIntent)!="undefined"){b.$files_dd.find("li.menupop").off("mouseover mouseout")}b.$bar.hoverIntentOn({over:function(d){a(this).addClass("hover")},out:function(d){a(this).removeClass("hover")},delegate:"#wp-admin-bar-sf-abt-files li.menupop",timeout:180,sensitivity:7,interval:100})},refresh_counters:function(){a.ajax({type:"post",url:sfabt.ajax_url+"?action=sf_abt_refresh_counters&nonce="+sfabt.refresh_counters_nonce,dataType:"json"}).done(function(c){if(c&&typeof c=="object"){b.update_counters(c.me,c.other);sfabt.cowork=parseInt(c.cowork,10)?"start":"stop";if(sfabt.cowork&&!b.events){b.cowork_events()}}}).fail(function(){b.log("noConnexion")})},update_counters:function(f,e){var d=b.$tools.find(".used-by-me-counter");var c=b.$tools.find(".used-by-other-counter");if(!f){d.remove()}else{if(!d.length){a('<span id="used-by-me-small" class="hidden-when-not-small used-by-me-counter">'+f+"</span>").insertAfter("#wp-admin-bar-sf-abt-close-files .sf-abt-stats");a('<span id="used-by-me" class="used-by-me-counter">'+f+"</span>").insertAfter("#wp-admin-bar-sf-abt-main > .ab-item .sf-abt-stats")}else{d.text(f)}}if(!e){c.remove()}else{if(!c.length){a('<span id="used-by-other-small" class="hidden-when-not-small used-by-other-counter">'+e+"</span>").appendTo("#wp-admin-bar-sf-abt-close-files > .ab-item");a('<span id="used-by-other" class="used-by-other-counter">'+e+"</span>").appendTo("#wp-admin-bar-sf-abt-main > .ab-item > .hidden-when-small")}else{c.text(e)}}},update_top_counters:function(){var d=a(document.getElementById("used-by-me"));var c=a(document.getElementById("used-by-other"));var f=a(document.getElementById("used-by-me-small"));var e=a(document.getElementById("used-by-other-small"));if(!f.length){d.remove()}else{if(!d.length){d=a('<span id="used-by-me" class="used-by-me-counter">0</span>').insertAfter("#wp-admin-bar-sf-abt-main > .ab-item .sf-abt-stats")}d.text(f.text())}if(!e.length){c.remove()}else{if(!c.length){c=a('<span id="used-by-other" class="used-by-other-counter">0</span>').appendTo("#wp-admin-bar-sf-abt-main > .ab-item > .hidden-when-small")}c.text(e.text())}},increment_my_counters_by:function(c){var f=a(document.getElementById("used-by-me"));var d=a(document.getElementById("used-by-me-small"));if(!f.length){f=a('<span id="used-by-me" class="used-by-me-counter">0</span>').insertAfter("#wp-admin-bar-sf-abt-main > .ab-item .sf-abt-stats")}if(!d.length){d=a('<span id="used-by-me-small" class="hidden-when-not-small used-by-me-counter">0</span>').insertAfter("#wp-admin-bar-sf-abt-close-files .sf-abt-stats")}var e=parseInt(f.text(),10)+parseInt(""+c,10);if(!e){f.remove();d.remove()}else{f.text(e);d.text(e)}},refresh_cowork_tree:function(){a.ajax({type:"post",url:sfabt.ajax_url+"?action=sf_abt_refresh_files&nonce="+sfabt.refresh_files_nonce+b.forceload+"&cowork="+sfabt.cowork,data:{files:b.open_files},dataType:"json",beforeSend:function(){a(document.getElementById("wp-admin-bar-sf-abt-coworking")).find(".ab-item").abtLoader()}}).done(function(i){if(typeof i=="object"&&i!==null&&typeof i.files!="undefined"){if(i.files=="stop"){b.forceload="&force=1";a(document.getElementById("wp-admin-bar-sf-abt-coworking")).children().text(sfabt.cowork_on).parent().siblings().slideUpRemove();b.update_counters(0,0);sfabt.cowork="stop";if(b.events){b.cowork_events()}}else{if(i.files=="not modified"){}else{if(typeof i.html!="undefined"){b.$files_dd.replaceWith(i.html);b.open_files=i.files;b.$files_dd=b.$tools.find("#wp-admin-bar-sf-abt-files").addClass("ab-submenu").removeClass("ab-top-menu");b.$clr_btn=b.$files_dd.find("#wp-admin-bar-sf-abt-close-files");b.update_top_counters();b.forceload="";sfabt.cowork="start";if(!b.events){b.cowork_events()}}else{var o=b.$files_dd.children(".sf-abt-root-directory");var d=b.$files_dd.children(".used-by-me").find(".ab-item");var e=0;var n=0;for(var f in i.files){if(i.files[f]==sfabt.mid){e++}else{n++}if(typeof b.open_files[f]!="undefined"&&i.files[f]==b.open_files[f]){delete (b.open_files[f]);continue}var j=f.split(sfabt.content_dir).join("");if(i.files[f]==sfabt.mid){var k=o.find('[title="'+j+'"]').parent();k.find(".avatar").remove();k.removeClass("used-by-other");var l=typeof i.avatars!="undefined"&&typeof i.avatars[i.files[f]]!="undefined"?i.avatars[i.files[f]]:"";k.abtAddClone(b.$clr_btn,l);}else{var h=o.find('[title="'+j+'"]').parent().removeClass("used-by-me");d.filter('[title="'+j+'"]').parent().slideUpRemove();h.addClass("used-by-other");if(typeof i.avatars!="undefined"&&typeof i.avatars[i.files[f]]!="undefined"&&i.avatars[i.files[f]]!==""&&!h.children(".ab-item").children(".avatar").length){h.children(".ab-item").prepend(i.avatars[i.files[f]])}}}for(var g in b.open_files){var c=g.split(sfabt.content_dir).join("");var m=o.find('[title="'+c+'"]').parent();m.find(".avatar").remove();m.removeClass("used-by-me used-by-other");d.filter('[title="'+c+'"]').parent().slideUpRemove()}b.update_counters(e,n);b.open_files=i.files}}}}}).fail(function(){b.log("noConnexion")}).always(function(){a(document.getElementById("wp-admin-bar-sf-abt-coworking")).find(".loader").fadeInRemove()})},cowork_events:function(){if(sfabt.cowork=="start"){b.$tools.on("click","#wp-admin-bar-sf-abt-files .abt-file .ab-item",function(f){var d=a(this);var c=d.attr("title");a.ajax({type:"post",url:sfabt.ajax_url+"?action=sf_abt_update_open_files&nonce="+sfabt.update_files_none,data:{file:c},dataType:"json",beforeSend:function(){d.abtLoader()}}).done(function(g){if(typeof g.msg=="string"){if(typeof g.files!="undefined"){b.open_files=g.files}if(g.msg=="you-got-it-my-young-padawan"){var e=typeof g.avatar=="string"?g.avatar:"";d.parent().abtAddClone(b.$clr_btn,e);b.increment_my_counters_by(1)}else{if(g.msg=="i-m-not-a-number"){var h=d.attr("title");b.$files_dd.find(".sf-abt-root-directory .used-by-me .ab-item").filter('[title="'+h+'"]').parent().removeClass("used-by-me");d.parent().slideUpRemove();b.increment_my_counters_by(-1)}else{if(g.msg=="you-shall-not-pass"){if(!d.parent().hasClass("used-by-other")){d.parent().addClass("used-by-other");if(typeof g.avatar=="string"){if(g.avatar!==""){d.prepend(g.avatar)}}}}else{b.log("unknownError")}}}}else{b.log("badResponse")}}).fail(function(){b.log("noConnexion")}).always(function(){d.abtRemoveLoader()});f.preventDefault()}).on("click","#wp-admin-bar-sf-abt-close-files .ab-item",function(d){var c=a(this);a.ajax({type:"post",url:sfabt.ajax_url+"?action=sf_abt_close_all_my_files&nonce="+sfabt.close_files_nonce,beforeSend:function(){c.abtLoader()}}).done(function(e){if(e=="removed"){b.$files_dd.find(".used-by-me").removeClass("used-by-me");c.parent().siblings(".abt-file").slideUpRemove();a("#used-by-me, #used-by-me-small").remove()}else{b.log("unkownError")}}).fail(function(){b.log("noConnexion")}).always(function(){c.abtRemoveLoader()});d.preventDefault()}).on("mouseenter","#wp-admin-bar-sf-abt-main > .ab-item",function(c){b.refresh_cowork_tree();c.preventDefault()}).on("mouseenter",".menupop",function(c){a(this).each(function(){var g=a(this);var h=a(window);var d=g.children(".ab-sub-wrapper");var f=g.offset().top-h.scrollTop();var e=d.outerHeight();var i=d.css("bottom");if((f!=73)&&(f-e<0)&&(f+e>h.height())){d.css({top:function(){return 73-f},bottom:"auto"})}else{if((i!="7px")&&(f-e>0)&&(f+e>h.height())){d.css({bottom:-7,top:"auto"})}else{if(i!="auto"){d.css({bottom:"auto",top:"auto"})}}}})});if(sfabt.refresh_cowork=='1'){b.refc=setInterval(b.refresh_counters,300000)}b.events=1}else{if(sfabt.cowork=="stop"){b.$tools.off("click mouseenter","**");if(sfabt.refresh_cowork=='1'){b.refc=clearInterval(b.refc)}b.events=0}}},init:function(){if(window.localStorage){if(localStorage.getItem("smallAdminBar")){b.$body.addClass("admin-bar-small")}if(b.$body.hasClass("wp-admin")&&localStorage.getItem("fixedAdminMenu")){b.$body.addClass("admin-menu-fixed")}window.onunload=function(){if(b.$body.hasClass("admin-bar-small")){localStorage.setItem("smallAdminBar",1)}else{localStorage.removeItem("smallAdminBar")}if(b.$body.hasClass("admin-menu-fixed")){localStorage.setItem("fixedAdminMenu",1)}else{if(b.$body.hasClass("wp-admin")){localStorage.removeItem("fixedAdminMenu")}}}}else{b.log("noLocalStorage")}b.$bar.on("click","#wp-admin-bar-sf-abt-main>.ab-item",function(c){b.$body.toggleClass("admin-bar-small");c.preventDefault()});if(b.$body.hasClass("wp-admin")){b.$bar.on("click","#wp-admin-bar-sf-abt-menuWpQuery > .ab-item",function(c){b.$body.toggleClass("admin-menu-fixed");c.preventDefault()})}else{b.$body.on("click","#wp-admin-bar-sf-abt-menuWpQuery > .ab-item, #sf-abt-h2",function(h){var g=a(document.getElementById("sf-abt-pre-wrap"));if(g.length&&g.hasClass("is-404")){g.show()}else{var d=a(document.getElementById("sf-abt-pre-cont"));if(!d.length){d=a('<div id="sf-abt-pre-cont"/>').appendTo(b.$body)}var c="?";var f=window.location.href;if(f.indexOf("#")!=-1){f=f.split("#")[0]}if(f.indexOf("?")!=-1){c="&"}d.html("").load(f+c+"_wpnonce="+sfabt.query_nonce+"&wp_query&noheader #sf-abt-pre-wrap")}h.preventDefault()}).on("click","#sf-abt-pre-wrap",function(d){if(d.target===this){var c=a(this);if(c.hasClass("is-404")){c.hide()}else{c.parent().remove()}d.preventDefault()}})}b.$tools.on("click, focus","input.no-adminbar-style",function(i){var h=a(this);var c=this.defaultValue;var d=h.data("nbrparams");var g="add_action( '"+c+"', ''"+(d!="undefined"&&d>1?", 10, "+d:"")+" );";var f=h.width();h.val(g).data("initwidth",f).css("width",function(){return h.parent().width()});this.select()}).on("blur","input.no-adminbar-style",function(f){var d=a(this);var c=this.defaultValue;d.val(c).css("width",function(){return d.data("initwidth")}).removeData("initwidth")});if(sfabt.refresh_cowork=='1'){a(window).on("focus",function(c){if(b.forceload){b.refresh_counters()}else{b.refresh_cowork_tree()}});}b.$bar.on("click","#wp-admin-bar-sf-abt-coworking .ab-item",function(d){var c=a(this);a.ajax({type:"post",url:sfabt.ajax_url+"?action=sf_abt_enable_coworking&nonce="+sfabt.coworking_nonce,beforeSend:function(){c.abtLoader()}}).done(function(e){if(e=="start"){sfabt.cowork="start";if(!b.events){b.cowork_events()}b.refresh_cowork_tree()}else{b.forceload="&force=1";c.text(sfabt.cowork_on).parent().siblings().slideUpRemove();b.update_counters(0,0);sfabt.cowork="stop";if(b.events){b.cowork_events()}}}).fail(function(){b.log("noConnexion")}).always(function(){c.abtRemoveLoader()});d.preventDefault()});b.hoverIntent();if(!b.events){b.cowork_events()}}};b.init()});